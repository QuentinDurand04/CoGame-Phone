<!doctype html>
<html>
<head>
    <title>Rôles</title>
</head>
<body>
<h1>Vous pouvez sélectionner votre rôle :</h1>
<p>Un écran principal permet de créer une partie et de l'administrer. Un id est généré et vous pouvez y connecter avec une manette</p>

<button id="createScreenButton">Écran principal</button>

<p>Une manette permet de jouer au jeu affiché sur l'écran, vous pouvez vous y connecter avec l'id affiché sur l'écran</p>
<input type="text" id="idRoomJ" name="idRoomJ" placeholder="ID de la room">
<input type="text" id="name" name="name" placeholder="Nom du joueur">
<button id="joinRoomButton">Manette</button>

<script src="/socket.io/socket.io.js"></script>
<script>
    const socket = io();

    // Création de l'écran principal
    document.getElementById("createScreenButton").addEventListener("click", () => {
        socket.emit("createRoom");  // Demande de création de room
        socket.on("idRoom", (room) => {
            window.location.href = `/ecran?idRoom=${room}`;  // Redirection avec l'ID généré
        });
    });

    // Connexion de la manette
    document.getElementById("joinRoomButton").addEventListener("click", () => {
        const idRoomJ = document.getElementById("idRoomJ").value;
        const name = document.getElementById("name").value;

        if (idRoomJ && name) {
            socket.emit("joinRoom", { idRoomJ, name });
            window.location.href = `/manette?idRoom=${idRoomJ}&name=${name}`;
        } else {
            alert("Veuillez remplir les deux champs.");
        }
    });
</script>
</body>
</html>
