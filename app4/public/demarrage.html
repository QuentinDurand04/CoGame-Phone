<!doctype html>
<html>
<head>
    <title>Démarrage de la Partie</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script>
        $(function () {
            const socket = io();
            const pin = new URLSearchParams(window.location.search).get('pin');

            $('#pin').text(pin);
            socket.emit('identify', { role: 'ecran', pin });

            // Affichage des manettes connectées
            socket.on('playerJoined', (name) => {
                $('#players').append('<li>' + name + '</li>');
            });

            // Lancer le jeu
            $('#startButton').click(() => {
                socket.emit('startGame'); // Émettre l'événement 'startGame' à toutes les manettes connectées
                window.location.href = '/BasQiZ/ecran';
            });
        });
    </script>
</head>
<body>
<h1>Démarrage de la Partie</h1>
<p>Code PIN : <span id="pin"></span></p>
<h2>Joueurs Connectés :</h2>
<ul id="players"></ul>
<button id="startButton">Lancer le jeu</button>
</body>
</html>
